{
  "data" : {
    "model" : {
      "protocol" : "HDFS",
      "host" : "localhost",
      "useCustomPort" : false,
      "customPort" : 8020,
      "authSettings" : {
        "authType" : "SIMPLE",
        "username" : "jenkins"
      },
      "workingDirectory" : "/"
    }
  },
  "schema" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "authSettings" : {
            "type" : "object",
            "properties" : {
              "authType" : {
                "oneOf" : [ {
                  "const" : "SIMPLE",
                  "title" : "Username"
                }, {
                  "const" : "KERBEROS",
                  "title" : "Kerberos"
                } ],
                "title" : "Type",
                "description" : "Authentication method to use for connecting to HDFS.\n<ul>\n<li><b>Username</b>: Pseudo/Simple authentication using a given username</li>\n<li><b>Kerberos</b>: Kerberos ticket based authentication</li>\n</ul>",
                "default" : "SIMPLE"
              },
              "username" : {
                "type" : "string",
                "title" : "Username",
                "description" : "The username to use for Pseudo/Simple authentication. This username will be used to access the HDFS file system.",
                "default" : "jenkins"
              }
            },
            "default" : {
              "authType" : "SIMPLE",
              "username" : "jenkins"
            }
          },
          "customPort" : {
            "type" : "integer",
            "format" : "int32",
            "title" : "Custom port",
            "description" : "The custom port number to connect to. Must be between 1 and 65535. Note: The WebHDFS default ports are the Hadoop 3.x default ports. The default WebHDFS port on Hadoop 2.x is 50070 and 50470 with SSL.",
            "default" : 8020
          },
          "host" : {
            "type" : "string",
            "title" : "Host",
            "description" : "Address of HDFS name node or WebHDFS/HTTPFS node.",
            "default" : "localhost"
          },
          "protocol" : {
            "oneOf" : [ {
              "const" : "HDFS",
              "title" : "HDFS"
            }, {
              "const" : "WEBHDFS",
              "title" : "WebHDFS"
            }, {
              "const" : "WEBHDFS_SSL",
              "title" : "WebHDFS with SSL"
            }, {
              "const" : "HTTPFS",
              "title" : "HttpFS"
            }, {
              "const" : "HTTPFS_SSL",
              "title" : "HttpFS with SSL"
            } ],
            "title" : "Protocol",
            "description" : "HDFS protocol to use.\n<ul>\n<li><b>HDFS</b>: Native HDFS protocol (default port: 8020)</li>\n<li><b>WebHDFS</b>: WebHDFS REST API (default port: 9870)</li>\n<li><b>WebHDFS with SSL</b>: WebHDFS REST API with SSL encryption (default port: 9871)</li>\n<li><b>HttpFS</b>: HttpFS REST API (default port: 14000)</li>\n<li><b>HttpFS with SSL</b>: HttpFS REST API with SSL encryption (default port: 14000)</li>\n</ul>",
            "default" : "HDFS"
          },
          "useCustomPort" : {
            "type" : "boolean",
            "title" : "Custom Port",
            "description" : "Choose whether to use the default port for the selected protocol or specify a custom port.",
            "default" : false
          },
          "workingDirectory" : {
            "type" : "string",
            "title" : "Working directory",
            "description" : "Specify the working directory of the resulting file system connection. The working directory must be specified as an absolute path (starting with \"/\"). A working directory allows downstream nodes to access files/folders using relative paths, i.e. paths that do not have a leading slash. The default working directory is the root \"/\".",
            "default" : "/"
          }
        }
      }
    }
  },
  "ui_schema" : {
    "elements" : [ {
      "label" : "Connection",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/protocol"
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/host",
        "options" : {
          "validation" : {
            "minLength" : {
              "errorMessage" : "The field cannot be empty (it must contain at least one character).",
              "parameters" : {
                "minLength" : 1
              }
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/useCustomPort",
        "options" : {
          "format" : "checkbox"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/customPort",
        "options" : {
          "validation" : {
            "max" : {
              "errorMessage" : "The value must not exceed 65535.",
              "parameters" : {
                "isExclusive" : false,
                "max" : 65535.0
              }
            },
            "min" : {
              "errorMessage" : "The value must be at least 1.",
              "parameters" : {
                "isExclusive" : false,
                "min" : 1.0
              }
            }
          }
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/useCustomPort",
            "schema" : {
              "const" : true
            }
          }
        }
      } ]
    }, {
      "label" : "Authentication",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/authSettings/properties/authType"
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/authSettings/properties/username",
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/authSettings/properties/authType",
            "schema" : {
              "oneOf" : [ {
                "const" : "SIMPLE"
              } ]
            }
          }
        }
      } ]
    }, {
      "label" : "File System",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/workingDirectory",
        "options" : {
          "selectionMode" : "FOLDER",
          "format" : "stringFileChooser"
        },
        "providedOptions" : [ "fileSystemId" ]
      } ]
    } ]
  },
  "persist" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "protocol" : {
            "configKey" : "protocol"
          },
          "host" : {
            "configKey" : "host"
          },
          "useCustomPort" : {
            "configKey" : "useCustomPort"
          },
          "customPort" : {
            "configKey" : "customPort"
          },
          "authSettings" : {
            "configPaths" : [ [ "auth", "type" ], [ "auth", "simple", "user" ] ]
          },
          "workingDirectory" : {
            "configKey" : "workingDirectory"
          }
        }
      }
    }
  },
  "globalUpdates" : [ {
    "trigger" : {
      "id" : "after-open-dialog"
    },
    "triggerInitially" : true,
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/authSettings/properties/authType"
    },
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/authSettings/properties/username"
    },
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/customPort"
    },
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/host"
    },
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/protocol"
    },
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/useCustomPort"
    },
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/workingDirectory"
    },
    "dependencies" : [ "#/properties/model/properties/authSettings/properties/authType", "#/properties/model/properties/authSettings/properties/username", "#/properties/model/properties/customPort", "#/properties/model/properties/host", "#/properties/model/properties/protocol", "#/properties/model/properties/useCustomPort", "#/properties/model/properties/workingDirectory" ]
  } ]
}
